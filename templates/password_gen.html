{% extends 'base.html' %}

{% block content %}

<div class="w3-container w3-left">
    <div class="w3-container">  
        <h1 class="w3"> Pseudo Random Keygen </h1>
    </div>
    <hr>

    <div class="w3-container">
        <a href="{{ url_for('routes.generate') }}" class="w3-btn w3-dark-grey">Generate IV & Key</a>
    </div>

    <div class="w3-container">
        {% if data.iv %}
            <div class="w3-panel w3-padding-16 w3-left">
                <h4 class="w3">IV</h4>
                <p id="span_iv" class="w3 word-wrapper">{{ data.iv }}</p>
                <br><br>
                <button id="iv_out_tooltip" onclick="clipboard(0)" onmouseout="outFunc(0)" class="w3-btn w3-dark-grey">Copy</button>
            </div>
        {% endif %}
        <div class="w3-panel w3-padding-16 w3-left">
            <h4 class="w3">Key</h4>
            <p id="span_key" class="w3 word-wrapper">{{ data.key }}</p>
            <br><br>
            <button id="key_out_tooltip"onclick="clipboard(1)" onmouseout="outFunc(1)" class="w3-btn w3-dark-grey">Copy</button>
        </div>
    </div>
</div>

<script>
function clipboard(element_name) {
    if(element_name == '0'){
        var copyText = document.getElementById("span_iv");
        var textArea = document.createElement("textarea");
        textArea.value = copyText.textContent;
        document.body.appendChild(textArea);
        textArea.select();
        document.execCommand("Copy");
        textArea.remove();
        var tooltip = document.getElementById("iv_out_tooltip");
        tooltip.innerHTML = "Copied to clipboard.";
    }else{
        var copyText = document.getElementById("span_key");
        var textArea = document.createElement("textarea");
        textArea.value = copyText.textContent;
        document.body.appendChild(textArea);
        textArea.select();
        document.execCommand("Copy");
        textArea.remove();
        
        var tooltip = document.getElementById("key_out_tooltip");
        tooltip.innerHTML = "Copied to clipboard.";
    }
  
}

function getKeySize(){
    return document.getElementById("key_size_input").value;
    
}

function outFunc(element_name) {
    if(element_name == '0'){
        var tooltip = document.getElementById("iv_out_tooltip");
        tooltip.innerHTML = "Copy";
    }else{
        var tooltip = document.getElementById("key_out_tooltip");
        tooltip.innerHTML = "Copy";
    }
}

function myFunction() {
    // Get the snackbar DIV
    var x = document.getElementById("snackbar");

    // Add the "show" class to DIV
    x.className = "show";

    // After 3 seconds, remove the show class from DIV
    setTimeout(function(){ x.className = x.className.replace("show", ""); }, 10000);
}
</script>
{% endblock %}